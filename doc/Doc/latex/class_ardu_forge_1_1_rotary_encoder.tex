\hypertarget{class_ardu_forge_1_1_rotary_encoder}{}\doxysection{Ardu\+Forge\+::Rotary\+Encoder Class Reference}
\label{class_ardu_forge_1_1_rotary_encoder}\index{ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}}


This class tracks the position of an incremental rotary encoder.  




{\ttfamily \#include $<$Rotary\+Encoder.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_adab116ea00cdfccc595e8531a00840a2}\label{class_ardu_forge_1_1_rotary_encoder_adab116ea00cdfccc595e8531a00840a2}} 
\mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_adab116ea00cdfccc595e8531a00840a2}{Rotary\+Encoder}} (void)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_ad2cb23d0137a2080570999f23e026b14}\label{class_ardu_forge_1_1_rotary_encoder_ad2cb23d0137a2080570999f23e026b14}} 
\mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_ad2cb23d0137a2080570999f23e026b14}{$\sim$\+Rotary\+Encoder}} (void)
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a6134aa7d366dc10ee15db5e84a152f51}{begin}} (uint8\+\_\+t Clk\+Pin, uint8\+\_\+t Dt\+Pin, uint8\+\_\+t Switch\+Pin, bool Pullup=true)
\begin{DoxyCompactList}\small\item\em Starts communication with the rotary encoder. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a386191ca0608a701f6cd540a58172f6c}\label{class_ardu_forge_1_1_rotary_encoder_a386191ca0608a701f6cd540a58172f6c}} 
void \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a386191ca0608a701f6cd540a58172f6c}{end}} (void)
\begin{DoxyCompactList}\small\item\em Ends communication with the device. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a35c52ea39d46c1883ad7a27901357649}{update}} (void)
\begin{DoxyCompactList}\small\item\em Updates state and position of the encoder. Has to be called every time the clock signal changes. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_ae20001430dcc8b213a0599406370085d}{switch\+State}} (void) const
\begin{DoxyCompactList}\small\item\em Returns the current switch state. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_ac6c8df004404a9afd4ae364752e3b670}{direction}} (void) const
\begin{DoxyCompactList}\small\item\em Returns the direction the shaft was last turned. \end{DoxyCompactList}\item 
int32\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_aa8ba74638f964c2f32b7d5b1519271fa}{position}} (void) const
\begin{DoxyCompactList}\small\item\em Returns the current position. \end{DoxyCompactList}\item 
int32\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a6690acc275edf36b6c61d0b42afcc2aa}{reset\+Position}} (void)
\begin{DoxyCompactList}\small\item\em Resets the position tracking to 0. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a23581372c0491099ae45d216a813b6e9}\label{class_ardu_forge_1_1_rotary_encoder_a23581372c0491099ae45d216a813b6e9}} 
static const uint8\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a23581372c0491099ae45d216a813b6e9}{D\+I\+R\+\_\+\+CW}} = 0
\begin{DoxyCompactList}\small\item\em Clock wise direction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a406bc44e2a60405f89d7e048d177bb8c}\label{class_ardu_forge_1_1_rotary_encoder_a406bc44e2a60405f89d7e048d177bb8c}} 
static const uint8\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a406bc44e2a60405f89d7e048d177bb8c}{D\+I\+R\+\_\+\+C\+CW}} = 1
\begin{DoxyCompactList}\small\item\em Counter clock wise direction. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a5b897c24d0231599ed3163f43c09cdd2}\label{class_ardu_forge_1_1_rotary_encoder_a5b897c24d0231599ed3163f43c09cdd2}} 
uint8\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a5b897c24d0231599ed3163f43c09cdd2}{m\+\_\+\+Clk}}
\begin{DoxyCompactList}\small\item\em Clock pin. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a86594e601b12d288a7884092b66e4a27}\label{class_ardu_forge_1_1_rotary_encoder_a86594e601b12d288a7884092b66e4a27}} 
uint8\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a86594e601b12d288a7884092b66e4a27}{m\+\_\+\+Dt}}
\begin{DoxyCompactList}\small\item\em DT pin. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a65487410556b76e6697a6598b5221671}\label{class_ardu_forge_1_1_rotary_encoder_a65487410556b76e6697a6598b5221671}} 
uint8\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a65487410556b76e6697a6598b5221671}{m\+\_\+\+Switch}}
\begin{DoxyCompactList}\small\item\em Switch pin. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_af12a51ee0ee2182ac2d69772d1785c18}\label{class_ardu_forge_1_1_rotary_encoder_af12a51ee0ee2182ac2d69772d1785c18}} 
int8\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_af12a51ee0ee2182ac2d69772d1785c18}{m\+\_\+\+Last\+State}}
\begin{DoxyCompactList}\small\item\em Last state of the clock signal. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a0cd54b101df6f15e64b73b0cfd6492b3}\label{class_ardu_forge_1_1_rotary_encoder_a0cd54b101df6f15e64b73b0cfd6492b3}} 
int32\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a0cd54b101df6f15e64b73b0cfd6492b3}{m\+\_\+\+Rotary\+Position}}
\begin{DoxyCompactList}\small\item\em Current position. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a3ea818e0901cd2a8d5d6223a2af76597}\label{class_ardu_forge_1_1_rotary_encoder_a3ea818e0901cd2a8d5d6223a2af76597}} 
uint8\+\_\+t \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a3ea818e0901cd2a8d5d6223a2af76597}{m\+\_\+\+Dir}}
\begin{DoxyCompactList}\small\item\em Direction the encoder is turning. Can be D\+I\+R\+\_\+\+CW or D\+I\+R\+\_\+\+C\+CW. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a4a6bac69969fcc46b20549173fb75b3b}\label{class_ardu_forge_1_1_rotary_encoder_a4a6bac69969fcc46b20549173fb75b3b}} 
bool \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a4a6bac69969fcc46b20549173fb75b3b}{m\+\_\+\+Switch\+State}}
\begin{DoxyCompactList}\small\item\em State of the switch. True if pressed, false otherwise. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This class tracks the position of an incremental rotary encoder. 

The state of the rotary encoder changes positively or negatively based on the direction the shaft is turned. Many devices also feature a switch that is activated by pushing the shaft. The switch pin can be configured to use a pullup input. The \mbox{\hyperlink{class_ardu_forge_1_1_rotary_encoder_a35c52ea39d46c1883ad7a27901357649}{Rotary\+Encoder\+::update}} method has to be called every time the clock signal changes. Use polling or interrupt (see examples).  \begin{DoxyRemark}{Remarks}
There are many types of rotary encoder. This class is suited to handle K\+Y-\/040 devices and comparable. 
\end{DoxyRemark}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a6134aa7d366dc10ee15db5e84a152f51}\label{class_ardu_forge_1_1_rotary_encoder_a6134aa7d366dc10ee15db5e84a152f51}} 
\index{ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}!begin@{begin}}
\index{begin@{begin}!ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}}
\doxysubsubsection{\texorpdfstring{begin()}{begin()}}
{\footnotesize\ttfamily void Ardu\+Forge\+::\+Rotary\+Encoder\+::begin (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{Clk\+Pin,  }\item[{uint8\+\_\+t}]{Dt\+Pin,  }\item[{uint8\+\_\+t}]{Switch\+Pin,  }\item[{bool}]{Pullup = {\ttfamily true} }\end{DoxyParamCaption})}



Starts communication with the rotary encoder. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em Clk\+Pin} & Clock pin \\
\hline
\mbox{\texttt{ in}}  & {\em Dt\+Pin} & Dt\+Pin \\
\hline
\mbox{\texttt{ in}}  & {\em Switch\+Pin} & Switch pin. \\
\hline
\mbox{\texttt{ in}}  & {\em Pullup} & Specify whether to use a pullup input for the switch. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_ac6c8df004404a9afd4ae364752e3b670}\label{class_ardu_forge_1_1_rotary_encoder_ac6c8df004404a9afd4ae364752e3b670}} 
\index{ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}!direction@{direction}}
\index{direction@{direction}!ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}}
\doxysubsubsection{\texorpdfstring{direction()}{direction()}}
{\footnotesize\ttfamily uint8\+\_\+t Ardu\+Forge\+::\+Rotary\+Encoder\+::direction (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption}) const}



Returns the direction the shaft was last turned. 

\begin{DoxyReturn}{Returns}
D\+I\+R\+\_\+\+CW or D\+I\+R\+\_\+\+C\+CW 
\end{DoxyReturn}
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_aa8ba74638f964c2f32b7d5b1519271fa}\label{class_ardu_forge_1_1_rotary_encoder_aa8ba74638f964c2f32b7d5b1519271fa}} 
\index{ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}!position@{position}}
\index{position@{position}!ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}}
\doxysubsubsection{\texorpdfstring{position()}{position()}}
{\footnotesize\ttfamily int32\+\_\+t Ardu\+Forge\+::\+Rotary\+Encoder\+::position (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption}) const}



Returns the current position. 

\begin{DoxyReturn}{Returns}
Current position. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a6690acc275edf36b6c61d0b42afcc2aa}\label{class_ardu_forge_1_1_rotary_encoder_a6690acc275edf36b6c61d0b42afcc2aa}} 
\index{ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}!resetPosition@{resetPosition}}
\index{resetPosition@{resetPosition}!ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}}
\doxysubsubsection{\texorpdfstring{resetPosition()}{resetPosition()}}
{\footnotesize\ttfamily int32\+\_\+t Ardu\+Forge\+::\+Rotary\+Encoder\+::reset\+Position (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Resets the position tracking to 0. 

\begin{DoxyReturn}{Returns}
Last position before the reset. 
\end{DoxyReturn}
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_ae20001430dcc8b213a0599406370085d}\label{class_ardu_forge_1_1_rotary_encoder_ae20001430dcc8b213a0599406370085d}} 
\index{ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}!switchState@{switchState}}
\index{switchState@{switchState}!ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}}
\doxysubsubsection{\texorpdfstring{switchState()}{switchState()}}
{\footnotesize\ttfamily bool Ardu\+Forge\+::\+Rotary\+Encoder\+::switch\+State (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption}) const}



Returns the current switch state. 

\begin{DoxyReturn}{Returns}
True if switch is pressed, false otherwise. 
\end{DoxyReturn}
\begin{DoxyRemark}{Remarks}
Switch is not debounced. 
\end{DoxyRemark}
\mbox{\Hypertarget{class_ardu_forge_1_1_rotary_encoder_a35c52ea39d46c1883ad7a27901357649}\label{class_ardu_forge_1_1_rotary_encoder_a35c52ea39d46c1883ad7a27901357649}} 
\index{ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}!update@{update}}
\index{update@{update}!ArduForge::RotaryEncoder@{ArduForge::RotaryEncoder}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void Ardu\+Forge\+::\+Rotary\+Encoder\+::update (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Updates state and position of the encoder. Has to be called every time the clock signal changes. 

Attaching an interrupt to the clock signal and calling this method when the interrupt occurs is the preferred approach to not miss any signals. 